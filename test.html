<!DOCTYPE html>
<meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src 'self' 'unsafe-inline'; connect-src https://pdw-usr.userreport.com https://dnt-userreport.com">


<script src="node_modules/es6-promise/dist/es6-promise.auto.js"></script>
<script src="dist/audienceproject-data-web.js"></script>

<script>
    window.__tcfapi = function (command, version, callback, arguments) {
    console.log('[Test Page] TCF 2.0 call:', command, arguments);

    if (command === 'getTCData') {
      callback({
        gdprApplies: true,
        tcString: ''
      }, true);
    } else

    if (command === 'addEventListener') {
      callback({
        gdprApplies: true,
        tcString: 'abc',
        purpose: {
          consents: {
            1: true,
            3: true
          }
        },
        vendors: {
          consents: {
            394: true
          }
        }
      }, true);
    }
  };
</script>

<script>
  const onSuccess = function (data) {
    console.log('[Test Page] Success:', data);
  };
  const onError = function (error) {
    console.log('[Test Page] Error:', error);
  };

  AudienceProjectData.fetch('test', { debug: true }).promise()
    .then(onSuccess)
    .catch(onError);
</script>
